{
  "Resources" : {
    "JobTable" : {
      "Type" : "AWS::DynamoDB::Table",
      "Properties" : {
        "TableName" : "Job",
        "ProvisionedThroughput" : {"ReadCapacityUnits" : 1, "WriteCapacityUnits" : 1},
        "KeySchema" :
        [
          {"AttributeName" : "CountryId", "KeyType" : "HASH"},
          {"AttributeName" : "JobId", "KeyType" : "RANGE"}
        ],
        "AttributeDefinitions" :
        [
          {"AttributeName" : "CountryId", "AttributeType" : "S"},
          {"AttributeName" : "JobId", "AttributeType" : "S"}
        ]
      }
    },
    "ApplicationTable" : {
      "Type" : "AWS::DynamoDB::Table",
      "Properties" : {
        "TableName" : "Applicant",
        "ProvisionedThroughput" : {"ReadCapacityUnits" : 1, "WriteCapacityUnits" : 1},
        "KeySchema" :
        [
          {"AttributeName" : "ApplicantId", "KeyType" : "HASH"}
        ],
        "AttributeDefinitions" :
        [
          {"AttributeName" : "ApplicantId", "AttributeType" : "S"}
        ]
      }
    },
    "JobApplicationTable" : {
      "Type" : "AWS::DynamoDB::Table",
      "Properties" : {
        "TableName" : "JobApplication",
        "ProvisionedThroughput" : {"ReadCapacityUnits" : 1, "WriteCapacityUnits" : 1},
        "KeySchema" :
        [
          {"AttributeName" : "JobId", "KeyType" : "HASH"},
          {"AttributeName" : "ApplicantId", "KeyType" : "RANGE"}
          
        ],
        "AttributeDefinitions" :
        [
          {"AttributeName" : "Score", "AttributeType" : "N"},
          {"AttributeName" : "ApplicantId", "AttributeType" : "S"},
          {"AttributeName" : "JobId", "AttributeType" : "S"}
        ],
        "GlobalSecondaryIndexes" : [{
          "IndexName" : "ApplicantJobs",
          "KeySchema" : [
            {
              "AttributeName" : "ApplicantId",
              "KeyType" : "HASH"
            },
            {
              "AttributeName" : "JobId",
              "KeyType" : "RANGE"
            }
          ],                         
          "Projection" : {
            "NonKeyAttributes" : ["ApplicationForm","TimeApplied"],
            "ProjectionType" : "INCLUDE"
          },
          "ProvisionedThroughput" : {
            "ReadCapacityUnits" : "1",
            "WriteCapacityUnits" : "1"
          }
        }],
        "LocalSecondaryIndexes": [{
          "IndexName" : "JobApplicationScore",
          "KeySchema" : [
            {
              "AttributeName" : "JobId",
              "KeyType" : "HASH"
            },
            {
              "AttributeName" : "Score",
              "KeyType" : "RANGE"
            }
          ],                           
          "Projection" : {
            "NonKeyAttributes" : ["ApplicantId"],
            "ProjectionType" : "INCLUDE"
          }
        }]
      }
    }
  }
}